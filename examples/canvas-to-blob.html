<!DOCTYPE html>
<html>
<head>
<style>
body {
    font-family: system-ui;
    font-size: 16px;
}

canvas, img {
    width: 160px;
    height: 160px;
    display: block;
}
</style>
</head>
<body>
<h2>canvas.toBlob()</h2>
<strong>Source</strong>
<canvas id="source" width="320" height="320"></canvas>
<strong>Destination</strong>
<img id="destination" width="320" height="320" src=""></img>
<script>
addEventListener("load", async () => {
    const sourceCanvas = document.getElementById("source");
    const sourceContext = sourceCanvas.getContext("2d");
    sourceContext.save();
    sourceContext.strokeStyle = "red";
    sourceContext.fillStyle = "rgba(200, 100, 100, 0.25)";
    sourceContext.lineWidth = 4;
    sourceContext.rect(40, 40, 240, 240);
    sourceContext.stroke();
    sourceContext.fill();
    sourceContext.restore();

    const blob = await new Promise(resolve => sourceCanvas.toBlob(resolve));
    const destinationImage = document.getElementById("destination");
    destinationImage.src = URL.createObjectURL(blob);
});
</script>
</body>
</html>